<div class="p-4 sm:p-6 md:p-8 bg-white shadow-xl rounded-2xl max-w-6xl mx-auto">

  <!-- Título del Formulario -->
  <h2 class="text-2xl font-bold text-gray-800 mb-4 text-center">Registro de Información Técnica</h2>
  <p class="text-sm text-center text-gray-600 mb-6"><strong>NIT del Cliente Seleccionado:</strong> {{ selectedNit }}</p>

  <!-- Datos del Tanque -->
  <div class="mb-8">
    <h3 class="text-xl font-semibold text-gray-700 mb-4">Datos del Tanque</h3>

    <!-- Selección de Tanque -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-2">Seleccionar Tanque</label>
      <select [(ngModel)]="selectedTankId" (change)="onSelectTank()"
        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent">
        <option value="" disabled selected>Seleccione un tanque</option>
        <option *ngFor="let tanque of tanques" [value]="tanque.id">
          {{ tanque.material }} - {{ tanque.capacidad }} gal
        </option>
      </select>
    </div>

    <!-- Campos del Tanque -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Material</label>
        <input type="text" [(ngModel)]="formData.material" placeholder="Ingrese el material" disabled
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500" />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Tipo de Tanque</label>
        <input type="text" [(ngModel)]="formData.tipoTanque" placeholder="Tipo de tanque" disabled
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500" />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Capacidad (gal)</label>
        <input type="number" [(ngModel)]="formData.capacidad" placeholder="Capacidad" disabled
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500" />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Año de Fabricación</label>
        <input type="number" [(ngModel)]="formData.anioFabricacion" placeholder="Año" disabled
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500" />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Fabricante</label>
        <input type="text" [(ngModel)]="formData.fabricante" placeholder="Fabricante" disabled
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500" />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Producto</label>
        <input type="text" [(ngModel)]="formData.producto" placeholder="Producto" disabled
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500" />
      </div>
    </div>
  </div>

  <!-- Parámetros de la Prueba -->
  <div class="mb-8">
    <h3 class="text-xl font-semibold text-gray-700 mb-4">Parámetros de la Prueba</h3>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Presión (PSI)</label>
        <input type="number" [(ngModel)]="formData.presion" placeholder="Presión"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500" />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Temperatura (°C)</label>
        <input type="number" [(ngModel)]="formData.temperatura" placeholder="Temperatura"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500" />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Fecha de la Prueba</label>
        <input type="date" [(ngModel)]="formData.fechaPrueba" [min]="minDate" [max]="maxDate"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500" />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Hora de la Prueba</label>
        <input type="time" [(ngModel)]="formData.horaPrueba"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500" />
      </div>
    </div>
  </div>

  <!-- Resultados y Observaciones -->
  <div class="mb-8">
    <h3 class="text-xl font-semibold text-gray-700 mb-4">Resultados y Observaciones</h3>
    <div>
      <!-- Estado de la Prueba (pendiente de implementar) -->
      <!-- <label class="block text-sm font-medium text-gray-700 mb-2">Estado de la Prueba</label> -->

      <label class="block text-sm font-medium text-gray-700 mb-2">Observaciones</label>
      <textarea [(ngModel)]="formData.observaciones" rows="4" placeholder="Ingrese observaciones"
        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500"></textarea>
    </div>
  </div>

  <!-- Evidencia Fotográfica -->
  <div class="mb-6">
    <label class="block text-sm font-medium text-gray-700 mb-2">Evidencia Fotográfica</label>
    <input type="file" multiple (change)="onFilesSelected($event)" accept="image/*"
      class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-cyan-50 file:text-cyan-700 hover:file:bg-cyan-100" />
    
    <!-- Vista previa -->
<div class="mt-4 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
  <div *ngFor="let imagen of imagenesVistaPrevia; let i = index" class="relative">
    <img [src]="imagen" class="w-full h-32 object-cover rounded-lg border border-gray-300" />
    <button
      (click)="eliminarImagen(i)"
      type="button"
      class="absolute top-1 right-1 bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs shadow hover:bg-red-700"
    >
      ✕
    </button>
  </div>
</div>

  
  </div>

  <!-- Modal de Éxito -->
  <div *ngIf="registroExitoso" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
    <div class="bg-white p-6 rounded-lg shadow-md max-w-md w-full text-center">
      <h2 class="text-xl font-semibold text-green-600">✅ Registro exitoso</h2>
      <p class="text-gray-700 mt-2">La información técnica ha sido guardada correctamente.</p>
    </div>
  </div>

  <!-- Botón de Guardar -->
  <div class="text-center mt-6">
    <button (click)="guardarDatos()"
      class="bg-cyan-500 text-white px-6 py-3 rounded-lg hover:bg-cyan-600 transition duration-300 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2">
      Guardar Información
    </button>
  </div>
</div>
